import{E as S,a as P}from"./el-table-column-a0bb2edd.js";import{_ as g,r as i,u as V,a as R,o as T,c as N,b as n,d as t,w as d,s as b,e as D,f as I,g as x,N as B,C as L,F as U,h as q,D as E,P as F,p as Q,i as j}from"./index-d0334602.js";import{f as M}from"./commonUtil-98c025f0.js";import{c as G,q as H}from"./chukudan-87c06866.js";import{_ as z}from"./btn_chaxun3-17dac2a0.js";import{_ as A}from"./btn_queren-a649dfc1.js";import{_ as J}from"./btn_shoudong-49ae805b.js";let y="";const K={mounted(){y=this.$refs.formRef},setup(){const s=M(new Date,"yyyy/MM/dd"),o=i(s),f=i(s),e=i(""),h=i(!1),C=i(!1),u=V(),r=R();let m=i([]);const _=({selectedValues:l})=>{o.value=l.join("-"),h.value=!1},p=({selectedValues:l})=>{f.value=l.join("-"),C.value=!1},k=()=>history.back(),v=()=>{y.submit()},w=()=>{b({duration:0,message:"加载中..."}),G({startTime:o.value.replace("/","-").replace("/","-")+" 00:00:00",endTime:f.value.replace("/","-").replace("/","-")+" 23:59:59"},0).then(l=>{m.value=l.data.value.records})};let a="";return{startDate:o,endDate:f,showPicker:h,showPicker2:C,onClickLeft:k,onConfirm:_,onConfirm2:p,onSubmit:w,onQuery:v,tableData:m,selectRow:(l,de,ce)=>{a=l},confirmSelect:()=>{a?(u.commit("setCarInfo",a),r.push({name:"chukudanDetails"})):D("请选择正确的行！")},handleConfirmSelect:()=>{e.value?(b(),H(e.value).then(l=>{if(I(),l.data.value)u.commit("setCarInfo",l.data.value),r.push({name:"chukudanDetails"});else{D("请输入正确的车号");return}})):x({message:"请手工录入车号！",type:"fail"})},chehao:e}}},c=s=>(Q("data-v-dea40a8a"),s=s(),j(),s),O={class:"table-content container"},W={class:"btn-area"},X=c(()=>t("img",{src:z,alt:""},null,-1)),Y=c(()=>t("div",null,"查询",-1)),Z=[X,Y],$=c(()=>t("img",{src:A,alt:""},null,-1)),ee=c(()=>t("div",null,"确认",-1)),oe=[$,ee],ae=c(()=>t("img",{src:J,alt:""},null,-1)),ne=c(()=>t("div",null,"手动确认",-1)),te=[ae,ne];function le(s,o,f,e,h,C){const u=B,r=q,m=E,_=F,p=L,k=U,v=P,w=S;return T(),N("main",null,[n(u,{title:"选择车号",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),t("div",O,[n(k,{onSubmit:e.onSubmit,id:"form-area",ref:"formRef"},{default:d(()=>[n(p,{inset:""},{default:d(()=>[n(r,{modelValue:e.startDate,"onUpdate:modelValue":o[0]||(o[0]=a=>e.startDate=a),"is-link":"",readonly:"",name:"startDate",label:"开始日期",placeholder:"点击选择时间",onClick:o[1]||(o[1]=a=>e.showPicker=!0),rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),n(_,{show:e.showPicker,"onUpdate:show":o[3]||(o[3]=a=>e.showPicker=a),position:"bottom"},{default:d(()=>[n(m,{onConfirm:e.onConfirm,onCancel:o[2]||(o[2]=a=>e.showPicker=!1)},null,8,["onConfirm"])]),_:1},8,["show"]),n(r,{modelValue:e.endDate,"onUpdate:modelValue":o[4]||(o[4]=a=>e.endDate=a),"is-link":"",readonly:"",name:"endDate",label:"结束日期",placeholder:"点击选择时间",onClick:o[5]||(o[5]=a=>e.showPicker2=!0),rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),n(_,{show:e.showPicker2,"onUpdate:show":o[7]||(o[7]=a=>e.showPicker2=a),position:"bottom"},{default:d(()=>[n(m,{onConfirm:e.onConfirm2,onCancel:o[6]||(o[6]=a=>e.showPicker2=!1)},null,8,["onConfirm"])]),_:1},8,["show"])]),_:1})]),_:1},8,["onSubmit"]),n(w,{data:e.tableData,border:"",id:"data-area",onRowClick:e.selectRow},{default:d(()=>[n(v,{prop:"plateNo",label:"车号"}),n(v,{prop:"contractNo",label:"单据号"})]),_:1},8,["data","onRowClick"]),t("div",null,[n(p,{inset:""},{default:d(()=>[n(r,{modelValue:e.chehao,"onUpdate:modelValue":o[8]||(o[8]=a=>e.chehao=a),label:"车号",placeholder:"请输入车号"},null,8,["modelValue"])]),_:1}),t("div",W,[t("div",{onClick:o[9]||(o[9]=(...a)=>e.onQuery&&e.onQuery(...a))},Z),t("div",{onClick:o[10]||(o[10]=(...a)=>e.confirmSelect&&e.confirmSelect(...a))},oe),t("div",{onClick:o[11]||(o[11]=(...a)=>e.handleConfirmSelect&&e.handleConfirmSelect(...a))},te)])])])])}const Ce=g(K,[["render",le],["__scopeId","data-v-dea40a8a"]]);export{Ce as default};
