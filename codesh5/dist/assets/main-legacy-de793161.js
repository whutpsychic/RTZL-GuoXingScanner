System.register(["./el-table-column-legacy-db2a7ebd.js","./index-legacy-fe23e677.js","./chukudan-legacy-76a2cf02.js","./btn_queren-legacy-7f409558.js","./btn_shoudong-legacy-bfef57fe.js","./btn_tichu-legacy-29a262ad.js"],(function(a,e){"use strict";var t,l,n,i,o,r,d,c,s,u,b,v,h,m,p,g,f,y,k,w,j,C,L,N,_,x,D,q,I,U;return{setters:[a=>{t=a.E,l=a.a},a=>{n=a._,i=a.I,o=a.a,r=a.j,d=a.r,c=a.u,s=a.k,u=a.l,b=a.e,v=a.s,h=a.o,m=a.c,p=a.b,g=a.d,f=a.w,y=a.q,k=a.g,w=a.N,j=a.v,C=a.t,L=a.p,N=a.h},a=>{_=a.b,x=a.d,D=a.s},a=>{q=a._},a=>{I=a._},a=>{U=a._}],execute:function(){var e=document.createElement("style");e.textContent=".container[data-v-6769ad9a]{display:flex;flex-direction:column;justify-content:space-between}.container>#data-area1[data-v-6769ad9a]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-6769ad9a]{border-radius:25px;font-size:20px;width:30%;min-height:50px}.btn-area img[data-v-6769ad9a]{width:45px}.btn-area>div[data-v-6769ad9a]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-6769ad9a]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-6769ad9a]:nth-child(3){background-color:var(--btn-color1)}[data-v-6769ad9a] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-6769ad9a] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(e);const E={setup(){i({duration:3e3});const a=o(),e=r();let t=d([]),l=d([{yingjian:0,yijian:0,queshao:0},{yingjian:"",yijian:0,queshao:""}]);const n=c();s.await("scanner",(a=>{f(a)}));let h=0,m=0,p="";const g=a=>{let e=n.state.chukudanListInfo;l.value[0].yingjian=e.planNum,l.value[0].queshao=e.planNum,h=0,m=0,a.forEach((a=>{h+=a.blocks,m+=a.weight})),l.value[0].yijian=m,l.value[1].yijian=h,m>0&&(l.value[0].queshao=(l.value[0].yingjian-m/1e3).toFixed(4)),l.value[0].queshao<0&&b("请求数量过多！")};u((()=>{let a=e.query.barcode,l=n.state.scandList||[];t.value=l,g(l),f(a)}));const f=a=>{if(a){if(!_(a.trim()))return void b("条形码不符合规范");for(let e=0;e<scandList.length;e++)if(scandList[e].barcode==a)return void b("该批次已经选择，请勿重复选择！");v("加载中"),x(a).then((a=>{!0===a.data.value?b(a.data.message):(scandList.push(a.data.value),n.commit("setScandList",scandList),t.value=scandList,g(scandList))}))}};return{onClickLeft:()=>history.back(),tableData1:t,tableData2:l,onHandle:()=>{a.push({name:"manualUnqualifiedBarcodes"})},onConfirm:()=>{if(0==t.value.length)return void b("没有拣配数据");n.state.chukudan;let e=n.state.chukudanListInfo,l=n.state.carInfo,i=n.state.userInfo,o={};o.carNo=l.plateNo,o.carUnit=l.forwardingUnit,o.deliveryNo=l.deliveryNo,o.materialCode=e.materialCode,o.materialId=e.materialDescribeId,o.materialName=e.materialDescribe,o.pickPackage=h,o.pickPerson=i.userId,o.pickWeight=m,o.receiveUnit=e.receiveUnit,o.remark=e.remark,o.sendPlanNo=e.billNo,o.type=e.type,o.unit=e.unit,o.warehouseCode=l.warehouseCode,o.warehouseName=l.warehouseName;let r=[];t.value.forEach((a=>{let e={};e.barcode=a.barcode,e.batchNo=a.batchNo,e.blocks=a.blocks,e.carNo=l.plateNo,e.code=a.code,e.unit=a.unit,e.weight=a.weight,r.push(e)})),v(),D({pickBill:o,pickBillDetailList:r}).then((e=>{(e.data.state=!0)?(t.value=[],n.commit("setScandList",t.value),k({message:"拣配成功!",type:"success",className:"toast",overlay:!0}),setTimeout((()=>{a.push({name:"chukudanQuery"})}),2e3)):b(e.data.message)}))},selectRow:(a,e,t)=>{p=y(a)},onDelete:()=>{if(p){let a=t.value.filter((a=>a.barcode!=p.barcode));t.value=a,n.commit("setScandList",t.value),p="",g(a)}else b("请选择要剔除的行！")}}}},R=a=>(L("data-v-6769ad9a"),a=a(),N(),a),S={class:"container"},B={class:"btn-area"},H=[R((()=>g("img",{src:q,alt:""},null,-1))),R((()=>g("div",null,"确认",-1)))],P=[R((()=>g("img",{src:I,alt:"",type:"primary"},null,-1))),R((()=>g("div",null,"手动",-1)))],z=[R((()=>g("img",{src:U,alt:"",type:"primary"},null,-1))),R((()=>g("div",null,"剔除",-1)))];a("default",n(E,[["render",function(a,e,n,i,o,r){const d=w,c=l,s=t;return h(),m("main",null,[p(d,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:i.onClickLeft},null,8,["onClickLeft"]),g("div",S,[p(s,{data:i.tableData1,border:"",id:"data-area1",onRowClick:i.selectRow},{default:f((()=>[p(c,{label:"日期"},{default:f((a=>[j(C(a.row.proDate.substr(0,10)),1)])),_:1}),p(c,{prop:"barcode",label:"条形码"}),p(c,{prop:"weight",label:"重量"})])),_:1},8,["data","onRowClick"]),p(s,{data:i.tableData2,border:"",id:"data-area2"},{default:f((()=>[p(c,{prop:"yingjian",label:"应拣"}),p(c,{prop:"yijian",label:"已拣"}),p(c,{prop:"queshao",label:"缺少"})])),_:1},8,["data"]),g("div",B,[g("div",{onClick:e[0]||(e[0]=(...a)=>i.onConfirm&&i.onConfirm(...a))},H),g("div",{onClick:e[1]||(e[1]=(...a)=>i.onHandle&&i.onHandle(...a))},P),g("div",{onClick:e[2]||(e[2]=(...a)=>i.onDelete&&i.onDelete(...a))},z)])])])}],["__scopeId","data-v-6769ad9a"]]))}}}));
