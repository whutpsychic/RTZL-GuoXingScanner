System.register(["./el-table-column-legacy-cafcd85c.js","./index-legacy-44292461.js","./chukudan-legacy-d9370803.js","./btn_queren-legacy-7f409558.js","./btn_shoudong-legacy-bfef57fe.js","./btn_tichu-legacy-29a262ad.js"],(function(e,a){"use strict";var t,l,o,n,i,r,c,d,s,u,v,b,m,p,g,h,f,k,y,w,C,N,j,_,x,D,L,q,I,U,B,S,E,R,H,P,T;return{setters:[e=>{t=e.E,l=e.a},e=>{o=e.y,n=e.x,i=e.I,r=e.z,c=e.A,d=e.b,s=e.B,u=e.J,v=e._,b=e.K,m=e.a,p=e.j,g=e.r,h=e.u,f=e.k,k=e.l,y=e.e,w=e.s,C=e.o,N=e.c,j=e.d,_=e.w,x=e.q,D=e.g,L=e.N,q=e.v,I=e.t,U=e.p,B=e.h},e=>{S=e.b,E=e.d,R=e.s},e=>{H=e._},e=>{P=e._},e=>{T=e._}],execute:function(){var a=document.createElement("style");let z,A;a.textContent=".container[data-v-3aef08c9]{display:flex;flex-direction:column;justify-content:space-between}.container>#data-area1[data-v-3aef08c9]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-3aef08c9]{border-radius:25px;font-size:14px;width:30%;height:50px}.btn-area img[data-v-3aef08c9]{top:5px;width:25px}.btn-area>div[data-v-3aef08c9]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-3aef08c9]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-3aef08c9]:nth-child(3){background-color:var(--btn-color1)}[data-v-3aef08c9] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-3aef08c9] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);let F={type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,position:void 0,className:"",lockScroll:!1,background:void 0};const J=()=>{A&&A.toggle(!1)};function K(e){var a;if(o)return A||({instance:A}=r({setup(){const{state:e,toggle:a}=c();return()=>d(u,s(e,{"onUpdate:show":a}),null)}})),e=n({},F,i(a=e)?a:{message:a}),A.open(e),clearTimeout(z),e.duration>0&&(z=setTimeout(J,e.duration)),A}const O={setup(){b({duration:3e3});const e=m(),a=p();let t=g([]),l=g([{yingjian:0,yijian:0,queshao:0},{yingjian:"",yijian:0,queshao:""}]);const o=h();f.await("scanner",(e=>{K({message:e}),d(e)}));let n=0,i=0,r="";const c=e=>{let a=o.state.chukudanListInfo;l.value[0].yingjian=a.planNum,l.value[0].queshao=a.planNum,n=0,i=0,e.forEach((e=>{n+=e.blocks,i+=e.weight})),l.value[0].yijian=i,l.value[1].yijian=n,i>0&&(l.value[0].queshao=(l.value[0].yingjian-i).toFixed(2)),l.value[0].queshao<0&&y("请求数量过多！")};k((()=>{let e=a.query.barcode,l=o.state.scandList||[];t.value=l,c(l),K({message:e}),d(e)}));const d=e=>{if(e){if(!S(e.trim()))return void y("条形码不符合规范");for(let a=0;a<t.value.length;a++)if(t.value[a].barcode==e)return void y("该批次已经选择，请勿重复选择！");w("加载中"),E(e).then((e=>{!0===e.data.value?y(e.data.message):(t.value.push(e.data.value),o.commit("setScandList",t.value),c(t.value))}))}};return{onClickLeft:()=>history.back(),tableData1:t,tableData2:l,onHandle:()=>{e.push({name:"manualUnqualifiedBarcodes"})},onConfirm:()=>{if(0==t.value.length)return void y("没有拣配数据");o.state.chukudan;let a=o.state.chukudanListInfo,l=o.state.carInfo,r=o.state.user,c={};c.carNo=l.plateNo,c.carUnit=l.forwardingUnit,c.deliveryNo=a.billNo,c.materialCode=a.materialCode,c.materialId=a.materialDescribeId,c.materialName=a.materialDescribe,c.pickPackage=t.value.length,c.pickBlockNumber=n,c.pickPerson=(null==r?void 0:r.userId)||"",c.pickWeight=i,c.receiveUnit=a.receiveUnit,c.remark=a.remark,c.sendPlanNo=a.planNo,c.type=a.type,c.unit=a.unit,c.warehouseCode=l.warehouseCode,c.warehouseName=l.warehouseName;let d=[];t.value.forEach((e=>{let a={};a.barcode=e.barcode,a.batchNo=e.batchNo,a.blocks=e.blocks,a.carNo=l.plateNo,a.code=e.code,a.unit=e.unit,a.weight=e.weight,d.push(a)})),w(),R({pickBill:c,pickBillDetailList:d}).then((a=>{(a.data.state=!0)?(t.value=[],o.commit("setScandList",t.value),D({message:"拣配成功!",type:"success",className:"toast",overlay:!0}),setTimeout((()=>{e.push({name:"chukudanQuery"})}),2e3)):y(a.data.message)}))},selectRow:(e,a,t)=>{r=x(e)},onDelete:()=>{if(r){let e=t.value.filter((e=>e.barcode!=r.barcode));t.value=e,o.commit("setScandList",t.value),r="",c(e)}else y("请选择要剔除的行！")}}}},Q=e=>(U("data-v-3aef08c9"),e=e(),B(),e),W={class:"container"},G={class:"btn-area"},M=[Q((()=>j("img",{src:H,alt:""},null,-1))),Q((()=>j("div",null,"确认",-1)))],V=[Q((()=>j("img",{src:P,alt:"",type:"primary"},null,-1))),Q((()=>j("div",null,"手动",-1)))],X=[Q((()=>j("img",{src:T,alt:"",type:"primary"},null,-1))),Q((()=>j("div",null,"剔除",-1)))];e("default",v(O,[["render",function(e,a,o,n,i,r){const c=L,s=l,u=t;return C(),N("main",null,[d(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),j("div",W,[d(u,{data:n.tableData1,border:"",id:"data-area1",onRowClick:n.selectRow},{default:_((()=>[d(s,{label:"日期"},{default:_((e=>[q(I(e.row.proDate.substr(0,10)),1)])),_:1}),d(s,{prop:"barcode",label:"条形码"}),d(s,{prop:"weight",label:"重量"})])),_:1},8,["data","onRowClick"]),d(u,{data:n.tableData2,border:"",id:"data-area2"},{default:_((()=>[d(s,{prop:"yingjian",label:"应拣"}),d(s,{prop:"yijian",label:"已拣"}),d(s,{prop:"queshao",label:"缺少"})])),_:1},8,["data"]),j("div",G,[j("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},M),j("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},V),j("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},X)])])])}],["__scopeId","data-v-3aef08c9"]]))}}}));
