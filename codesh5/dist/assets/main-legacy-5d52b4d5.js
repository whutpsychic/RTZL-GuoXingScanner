System.register(["./el-table-column-legacy-0c339458.js","./index-legacy-532a6373.js","./chukudan-legacy-7f6badf5.js","./btn_queren-legacy-7f409558.js","./btn_shoudong-legacy-bfef57fe.js","./btn_tichu-legacy-29a262ad.js"],(function(a,e){"use strict";var t,l,o,n,i,r,c,d,b,s,u,v,m,h,p,g,f,y,k,w,C,j,N,_,x,D,L,q;return{setters:[a=>{t=a.E,l=a.a},a=>{o=a._,n=a.a,i=a.k,r=a.r,c=a.u,d=a.m,b=a.e,s=a.s,u=a.o,v=a.c,m=a.b,h=a.d,p=a.w,g=a.q,f=a.g,y=a.N,k=a.v,w=a.t,C=a.p,j=a.i},a=>{N=a.b,_=a.d,x=a.s},a=>{D=a._},a=>{L=a._},a=>{q=a._}],execute:function(){var e=document.createElement("style");e.textContent=".container[data-v-b30cbbb7]{display:flex;flex-direction:column;justify-content:space-between}.container>#data-area1[data-v-b30cbbb7]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-b30cbbb7]{border-radius:25px;font-size:20px;width:30%;min-height:50px}.btn-area img[data-v-b30cbbb7]{width:45px}.btn-area>div[data-v-b30cbbb7]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-b30cbbb7]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-b30cbbb7]:nth-child(3){background-color:var(--btn-color1)}[data-v-b30cbbb7] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-b30cbbb7] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(e);const I={setup(){const a=n(),e=i();let t=r([]),l=r([{yingjian:0,yijian:0,queshao:0},{yingjian:"",yijian:0,queshao:""}]);const o=c();let u=0,v=0,m="";const h=a=>{let e=o.state.chukudanListInfo;l.value[0].yingjian=e.planNum,l.value[0].queshao=e.planNum,u=0,v=0,a.forEach((a=>{u+=a.blocks,v+=a.weight})),l.value[0].yijian=v,l.value[1].yijian=u,v>0&&(l.value[0].queshao=(l.value[0].yingjian-v/1e3).toFixed(4)),l.value[0].queshao<0&&b("请求数量过多！")};return d((()=>{let a=e.query,l=o.state.scandList||[];if(t.value=l,h(l),a.barcode){if(!N(a.barcode.trim()))return void b("条形码不符合规范");for(let e=0;e<l.length;e++)if(l[e].barcode==a.barcode)return void b("该批次已经选择，请勿重复选择！");s("加载中"),_(a.barcode).then((a=>{!0===a.data.value?b(a.data.message):(l.push(a.data.value),o.commit("setScandList",l),t.value=l,h(l))}))}})),{onClickLeft:()=>history.back(),tableData1:t,tableData2:l,onHandle:()=>{a.push({name:"manualUnqualifiedBarcodes"})},onConfirm:()=>{if(0==t.value.length)return void b("没有拣配数据");o.state.chukudan;let a=o.state.chukudanListInfo,e=o.state.carInfo;o.state.userInfo;let l={};l.carNo=e.plateNo,l.carUnit=e.forwardingUnit,l.deliveryNo=e.deliveryNo,l.materialCode=a.materialCode,l.materialId=a.materialDescribeId,l.materialName=a.materialDescribe,l.pickPackage=u,l.pickWeight=v,l.receiveUnit=a.receiveUnit,l.remark=a.remark,l.sendPlanNo=a.billNo,l.type=a.type,l.unit=a.unit,l.warehouseCode=e.warehouseCode,l.warehouseName=e.warehouseName;let n=[];t.value.forEach((a=>{let t={};t.barcode=a.barcode,t.batchNo=a.batchNo,t.blocks=a.blocks,t.carNo=e.plateNo,t.code=a.code,t.unit=a.unit,t.weight=a.weight,n.push(t)})),s(),x({pickBill:l,pickBillDetailList:n}).then((a=>{(a.data.state=!0)?(t.value=[],o.commit("setScandList",t.value),f({message:"拣配成功!",type:"success",className:"toast",overlay:!0})):b(a.data.message)}))},selectRow:(a,e,t)=>{m=g(a)},onDelete:()=>{if(m){let a=t.value.filter((a=>a.barcode!=m.barcode));t.value=a,o.commit("setScandList",t.value),m="",h(a)}else b("请选择要剔除的行！")}}}},U=a=>(C("data-v-b30cbbb7"),a=a(),j(),a),E={class:"container"},R={class:"btn-area"},S=[U((()=>h("img",{src:D,alt:""},null,-1))),U((()=>h("div",null,"确认",-1)))],B=[U((()=>h("img",{src:L,alt:"",type:"primary"},null,-1))),U((()=>h("div",null,"手动",-1)))],H=[U((()=>h("img",{src:q,alt:"",type:"primary"},null,-1))),U((()=>h("div",null,"剔除",-1)))];a("default",o(I,[["render",function(a,e,o,n,i,r){const c=y,d=l,b=t;return u(),v("main",null,[m(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),h("div",E,[m(b,{data:n.tableData1,border:"",id:"data-area1",onRowClick:n.selectRow},{default:p((()=>[m(d,{label:"日期"},{default:p((a=>[k(w(a.row.proDate.substr(0,10)),1)])),_:1}),m(d,{prop:"code",label:"条形码"}),m(d,{prop:"weight",label:"重量"})])),_:1},8,["data","onRowClick"]),m(b,{data:n.tableData2,border:"",id:"data-area2"},{default:p((()=>[m(d,{prop:"yingjian",label:"应拣"}),m(d,{prop:"yijian",label:"已拣"}),m(d,{prop:"queshao",label:"缺少"})])),_:1},8,["data"]),h("div",R,[h("div",{onClick:e[0]||(e[0]=(...a)=>n.onConfirm&&n.onConfirm(...a))},S),h("div",{onClick:e[1]||(e[1]=(...a)=>n.onHandle&&n.onHandle(...a))},B),h("div",{onClick:e[2]||(e[2]=(...a)=>n.onDelete&&n.onDelete(...a))},H)])])])}],["__scopeId","data-v-b30cbbb7"]]))}}}));
