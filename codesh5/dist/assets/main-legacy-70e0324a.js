System.register(["./el-table-column-legacy-ecc86b78.js","./index-legacy-83993173.js","./chukudan-legacy-079adb12.js","./btn_queren-legacy-7f409558.js","./btn_shoudong-legacy-bfef57fe.js","./btn_tichu-legacy-29a262ad.js"],(function(e,a){"use strict";var t,l,n,o,i,r,d,c,s,u,b,v,m,h,p,g,y,f,k,w,C,N,j,L,_,x,D,q,I,U;return{setters:[e=>{t=e.E,l=e.a},e=>{n=e._,o=e.I,i=e.a,r=e.k,d=e.r,c=e.u,s=e.l,u=e.g,b=e.m,v=e.e,m=e.s,h=e.o,p=e.c,g=e.b,y=e.d,f=e.w,k=e.q,w=e.N,C=e.v,N=e.t,j=e.p,L=e.i},e=>{_=e.b,x=e.d,D=e.s},e=>{q=e._},e=>{I=e._},e=>{U=e._}],execute:function(){var a=document.createElement("style");a.textContent=".container[data-v-e22462bd]{display:flex;flex-direction:column;justify-content:space-between}.container>#data-area1[data-v-e22462bd]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-e22462bd]{border-radius:25px;font-size:20px;width:30%;min-height:50px}.btn-area img[data-v-e22462bd]{width:45px}.btn-area>div[data-v-e22462bd]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-e22462bd]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-e22462bd]:nth-child(3){background-color:var(--btn-color1)}[data-v-e22462bd] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-e22462bd] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const E={setup(){o({duration:3e3});const e=i(),a=r();let t=d([]),l=d([{yingjian:0,yijian:0,queshao:0},{yingjian:"",yijian:0,queshao:""}]);const n=c();s.await("scanner",(e=>{u({message:e,type:"success",className:"toast",overlay:!0}),f(e)}));let h=0,p=0,g="";const y=e=>{let a=n.state.chukudanListInfo;l.value[0].yingjian=a.planNum,l.value[0].queshao=a.planNum,h=0,p=0,e.forEach((e=>{h+=e.blocks,p+=e.weight})),l.value[0].yijian=p,l.value[1].yijian=h,p>0&&(l.value[0].queshao=(l.value[0].yingjian-p/1e3).toFixed(4)),l.value[0].queshao<0&&v("请求数量过多！")};b((()=>{let e=a.query.barcode,l=n.state.scandList||[];t.value=l,y(l),f(e)}));const f=e=>{if(e){if(!_(e.trim()))return void v("条形码不符合规范");for(let a=0;a<scandList.length;a++)if(scandList[a].barcode==e)return void v("该批次已经选择，请勿重复选择！");m("加载中"),x(e).then((e=>{!0===e.data.value?v(e.data.message):(scandList.push(e.data.value),n.commit("setScandList",scandList),t.value=scandList,y(scandList))}))}};return{onClickLeft:()=>history.back(),tableData1:t,tableData2:l,onHandle:()=>{e.push({name:"manualUnqualifiedBarcodes"})},onConfirm:()=>{if(0==t.value.length)return void v("没有拣配数据");n.state.chukudan;let a=n.state.chukudanListInfo,l=n.state.carInfo,o=n.state.userInfo,i={};i.carNo=l.plateNo,i.carUnit=l.forwardingUnit,i.deliveryNo=l.deliveryNo,i.materialCode=a.materialCode,i.materialId=a.materialDescribeId,i.materialName=a.materialDescribe,i.pickPackage=h,i.pickPerson=o.userId,i.pickWeight=p,i.receiveUnit=a.receiveUnit,i.remark=a.remark,i.sendPlanNo=a.billNo,i.type=a.type,i.unit=a.unit,i.warehouseCode=l.warehouseCode,i.warehouseName=l.warehouseName;let r=[];t.value.forEach((e=>{let a={};a.barcode=e.barcode,a.batchNo=e.batchNo,a.blocks=e.blocks,a.carNo=l.plateNo,a.code=e.code,a.unit=e.unit,a.weight=e.weight,r.push(a)})),m(),D({pickBill:i,pickBillDetailList:r}).then((a=>{(a.data.state=!0)?(t.value=[],n.commit("setScandList",t.value),u({message:"拣配成功!",type:"success",className:"toast",overlay:!0}),setTimeout((()=>{e.push({name:"chukudanQuery"})}),2e3)):v(a.data.message)}))},selectRow:(e,a,t)=>{g=k(e)},onDelete:()=>{if(g){let e=t.value.filter((e=>e.barcode!=g.barcode));t.value=e,n.commit("setScandList",t.value),g="",y(e)}else v("请选择要剔除的行！")}}}},R=e=>(j("data-v-e22462bd"),e=e(),L(),e),S={class:"container"},B={class:"btn-area"},H=[R((()=>y("img",{src:q,alt:""},null,-1))),R((()=>y("div",null,"确认",-1)))],P=[R((()=>y("img",{src:I,alt:"",type:"primary"},null,-1))),R((()=>y("div",null,"手动",-1)))],z=[R((()=>y("img",{src:U,alt:"",type:"primary"},null,-1))),R((()=>y("div",null,"剔除",-1)))];e("default",n(E,[["render",function(e,a,n,o,i,r){const d=w,c=l,s=t;return h(),p("main",null,[g(d,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:o.onClickLeft},null,8,["onClickLeft"]),y("div",S,[g(s,{data:o.tableData1,border:"",id:"data-area1",onRowClick:o.selectRow},{default:f((()=>[g(c,{label:"日期"},{default:f((e=>[C(N(e.row.proDate.substr(0,10)),1)])),_:1}),g(c,{prop:"barcode",label:"条形码"}),g(c,{prop:"weight",label:"重量"})])),_:1},8,["data","onRowClick"]),g(s,{data:o.tableData2,border:"",id:"data-area2"},{default:f((()=>[g(c,{prop:"yingjian",label:"应拣"}),g(c,{prop:"yijian",label:"已拣"}),g(c,{prop:"queshao",label:"缺少"})])),_:1},8,["data"]),y("div",B,[y("div",{onClick:a[0]||(a[0]=(...e)=>o.onConfirm&&o.onConfirm(...e))},H),y("div",{onClick:a[1]||(a[1]=(...e)=>o.onHandle&&o.onHandle(...e))},P),y("div",{onClick:a[2]||(a[2]=(...e)=>o.onDelete&&o.onDelete(...e))},z)])])])}],["__scopeId","data-v-e22462bd"]]))}}}));
